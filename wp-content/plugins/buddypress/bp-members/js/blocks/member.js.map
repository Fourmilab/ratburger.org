{"version":3,"sources":["bp-members/js/blocks/member.js"],"names":["registerBlockType","wp","blocks","element","createElement","Fragment","components","Placeholder","Disabled","PanelBody","SelectControl","ToggleControl","Toolbar","ToolbarButton","blockEditor","InspectorControls","BlockControls","withSelect","data","compose","ServerSideRender","editor","__","i18n","AutoCompleter","bp","blockComponents","AVATAR_SIZES","label","value","editMember","attributes","setAttributes","bpSettings","isAvatarEnabled","isMentionEnabled","isCoverImageEnabled","avatarSize","displayMentionSlug","displayActionButton","displayCoverImage","itemID","option","editMemberBlock","select","getEditorSettings","members","title","description","icon","category","type","default","edit"],"mappings":"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","file":"member.js","sourceRoot":"../src/js","sourcesContent":["/**\n * WordPress dependencies.\n */\nconst { registerBlockType } = wp.blocks;\nconst { createElement, Fragment } = wp.element;\nconst { Placeholder, Disabled, PanelBody, SelectControl, ToggleControl, Toolbar, ToolbarButton } = wp.components;\nconst { InspectorControls, BlockControls } = wp.blockEditor;\nconst { withSelect } = wp.data;\nconst { compose } = wp.compose;\nconst { ServerSideRender } = wp.editor;\nconst { __ } = wp.i18n;\n\n/**\n * BuddyPress dependencies.\n */\nconst { AutoCompleter } = bp.blockComponents;\n\nconst AVATAR_SIZES = [\n\t{\n\t\tlabel: __( 'None', 'buddypress' ),\n\t\tvalue: 'none',\n\t},\n\t{\n\t\tlabel: __( 'Thumb', 'buddypress' ),\n\t\tvalue: 'thumb',\n\t},\n\t{\n\t\tlabel: __( 'Full', 'buddypress' ),\n\t\tvalue: 'full',\n\t},\n];\n\nconst editMember = ( { attributes, setAttributes, bpSettings } ) => {\n\tconst { isAvatarEnabled, isMentionEnabled, isCoverImageEnabled } = bpSettings;\n\tconst { avatarSize, displayMentionSlug, displayActionButton, displayCoverImage } = attributes;\n\n\tif ( ! attributes.itemID ) {\n\t\treturn (\n\t\t\t<Placeholder\n\t\t\t\ticon=\"admin-users\"\n\t\t\t\tlabel={ __( 'BuddyPress Member', 'buddypress' ) }\n\t\t\t\tinstructions={ __( 'Start typing the name of the member you want to feature into this post.', 'buddypress' ) }\n\t\t\t>\n\t\t\t\t<AutoCompleter\n\t\t\t\t\tcomponent=\"members\"\n\t\t\t\t\tariaLabel={ __( 'Member\\'s username', 'buddypress' ) }\n\t\t\t\t\tplaceholder={ __( 'Enter Member\\'s username hereâ€¦', 'buddypress' ) }\n\t\t\t\t\tonSelectItem={ setAttributes }\n\t\t\t\t\tuseAvatar={ isAvatarEnabled }\n\t\t\t\t/>\n\t\t\t</Placeholder>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<BlockControls>\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\ticon=\"edit\"\n\t\t\t\t\t\ttitle={ __( 'Select another member', 'buddypress' ) }\n\t\t\t\t\t\tonClick={ () =>{\n\t\t\t\t\t\t\tsetAttributes( { itemID: 0 } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</Toolbar>\n\t\t\t</BlockControls>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Settings', 'buddypress' ) } initialOpen={ true }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Display Profile button', 'buddypress' ) }\n\t\t\t\t\t\tchecked={ !! displayActionButton }\n\t\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\t\tsetAttributes( { displayActionButton: ! displayActionButton } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\tdisplayActionButton\n\t\t\t\t\t\t\t\t? __( 'Include a link to the user\\'s profile page under their display name.', 'buddypress' )\n\t\t\t\t\t\t\t\t: __( 'Toggle to display a link to the user\\'s profile page under their display name.', 'buddypress' )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{ isAvatarEnabled && (\n\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\tlabel={ __( 'Avatar size', 'buddypress' ) }\n\t\t\t\t\t\t\tvalue={ avatarSize }\n\t\t\t\t\t\t\toptions={ AVATAR_SIZES }\n\t\t\t\t\t\t\thelp={ __( 'Select \"None\" to disable the avatar.', 'buddypress' ) }\n\t\t\t\t\t\t\tonChange={ ( option ) => {\n\t\t\t\t\t\t\t\tsetAttributes( { avatarSize: option } );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ isCoverImageEnabled && (\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={ __( 'Display Cover Image', 'buddypress' ) }\n\t\t\t\t\t\t\tchecked={ !! displayCoverImage }\n\t\t\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\t\t\tsetAttributes( { displayCoverImage: ! displayCoverImage } );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\t\tdisplayCoverImage\n\t\t\t\t\t\t\t\t\t? __( 'Include the user\\'s cover image over their display name.', 'buddypress' )\n\t\t\t\t\t\t\t\t\t: __( 'Toggle to display the user\\'s cover image over their display name.', 'buddypress' )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ isMentionEnabled && (\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={ __( 'Display Mention slug', 'buddypress' ) }\n\t\t\t\t\t\t\tchecked={ !! displayMentionSlug }\n\t\t\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\t\t\tsetAttributes( { displayMentionSlug: ! displayMentionSlug } );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\t\tdisplayMentionSlug\n\t\t\t\t\t\t\t\t\t? __( 'Include the user\\'s mention name under their display name.', 'buddypress' )\n\t\t\t\t\t\t\t\t\t: __( 'Toggle to display the user\\'s mention name under their display name.', 'buddypress' )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<Disabled>\n\t\t\t\t<ServerSideRender block=\"bp/member\" attributes={ attributes } />\n\t\t\t</Disabled>\n\t\t</Fragment>\n\t);\n};\n\nconst editMemberBlock = compose( [\n\twithSelect( ( select ) => {\n\t\tconst editorSettings = select( 'core/editor' ).getEditorSettings();\n\t\treturn {\n\t\t\tbpSettings: editorSettings.bp.members || {},\n\t\t};\n\t} ),\n] )( editMember );\n\nregisterBlockType( 'bp/member', {\n\ttitle: __( 'Member', 'buddypress' ),\n\n\tdescription: __( 'BuddyPress Member.', 'buddypress' ),\n\n\ticon: 'admin-users',\n\n\tcategory: 'buddypress',\n\n\tattributes: {\n\t\titemID: {\n\t\t\ttype: 'integer',\n\t\t\tdefault: 0,\n\t\t},\n\t\tavatarSize: {\n\t\t\ttype: 'string',\n\t\t\tdefault: 'full',\n\t\t},\n\t\tdisplayMentionSlug: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t},\n\t\tdisplayActionButton: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t},\n\t\tdisplayCoverImage: {\n\t\t\ttype: 'boolean',\n\t\t\tdefault: true,\n\t\t},\n\t},\n\n\tedit: editMemberBlock,\n} );\n"]}