jQuery(document).ready(function(){function k(){if(wpajaxeditcommentedit.AEC_AftertheDeadline!="false"){AtD.rpc_css_lang=wpajaxeditcommentedit.AEC_AftertheDeadline_lang;a("#comment").addProofreader();a("#submit").click(function(){a(".AtD_edit_button").trigger("click")});a("#AtD_0").click(function(){a("div#comment").css("width","98%");var c=a("#message").position().top+a("#message").height();parent.jQuery("#cboxWrapper").height()<c&&a("#comment").css("height",a.ajaxcommenteditor.commentBoxHeight)}); var c=a("#AtD_0").clone(!0);a("#AtD_0").remove();a("#edit_options").append(c)}}function l(){if(wpajaxeditcommentedit.AEC_Expand!="false")$window=a(window),a.ajaxcommenteditor.width=parseInt($window.width()),a.ajaxcommenteditor.height=parseInt($window.height()),a("#edit_options").append("<span class='expand'></span>"),a(".expand").bind("click",function(){g()}),a(".retract").bind("click",function(){h()})}function g(){a(".expand").unbind("click");parent.jQuery.fn.colorbox.myResize("100%","100%",!0); var c=setInterval(function(){clearTimeout(c);a(".expand").removeClass().addClass("retract");a(".retract").bind("click",function(){h()});a.ajaxcommenteditor.commentBoxHeight=a("#comment").height();a("#comment").css("width","98%");a("#comment").css("height",parent.jQuery("#cboxContent").height()-a("#container").height()+a.ajaxcommenteditor.commentBoxHeight-35)},1E3)}function h(){a(".retract").unbind("click");parent.jQuery.fn.colorbox.myResize(a.ajaxcommenteditor.width,a.ajaxcommenteditor.height,!1); a("#comment").css("height",a.ajaxcommenteditor.commentBoxHeight);var c=setInterval(function(){clearTimeout(c);a(".retract").removeClass().addClass("expand");a(".expand").bind("click",function(){g()})},500)}function j(){a("#comment-options").hasClass("closed")?a("#comment-options h3 span").text(wpajaxeditcommentedit.AEC_MoreOptions):a("#comment-options h3 span").text(wpajaxeditcommentedit.AEC_LessOptions)}function m(){var c=n("ajax-edit-comments-options");c&&(a("#comment-options").attr("class",c), j());a("#comment-options h3").bind("click",function(){a("#comment-options").toggleClass("closed");j();var c=a("#comment-options").attr("class"),b=new Date;b.setTime(b.getTime()+31536E6);b="; expires="+b.toGMTString();document.cookie="ajax-edit-comments-options="+c+b+"; path=/";return!1});a("#cancel,#status a, #close a").bind("click",function(){parent.jQuery.fn.colorbox.close();return!1});a("#title a").bind("click",function(){window.open(this.href);return!1})}function o(){a("#status").show();a("#status").attr("class", "success");a("#message").html(wpajaxeditcommentedit.AEC_Loading);jQuery.post(ajaxurl,{action:a("#action").attr("value"),cid:parseInt(a("#commentID").attr("value")),pid:parseInt(a("#postID").attr("value")),_ajax_nonce:a("#_wpnonce").val()},function(c){var d=!1;a("#save").bind("click",function(){p();return!1});typeof c.error!="undefined"?(d=!0,a("#status").attr("class","error"),a("#message").html(c.error),a("#close-option").show(),a("#save").unbind("click")):(a("#comment").html(c.comment_content), a("#comment").attr("value",c.comment_content),a("#name").attr("value",c.comment_author),a("#e-mail").attr("value",c.comment_author_email),a("#URL").attr("value",c.comment_author_url));d||(a("#save, #cancel, #check_spelling").removeAttr("disabled"),a("#status").attr("class","success"),a("#message").html(wpajaxeditcommentedit.AEC_LoadSuccessful))},"json")}function p(){wpajaxeditcommentedit.AEC_AftertheDeadline=="true"&&a(".AtD_edit_button").trigger("click");a("#status").attr("class","success");a("#message").html(wpajaxeditcommentedit.AEC_Saving); a("#save").attr("disabled","disabled");var c=!1,d=encodeURIComponent(a("#name").attr("value")),b=encodeURIComponent(a("#e-mail").attr("value")),e=encodeURIComponent(a("#URL").attr("value")),i=encodeURIComponent(a("#comment").attr("value"));a("#_wpnonce").attr("value");var f={action:"savecomment",cid:parseInt(a("#commentID").attr("value")),pid:parseInt(a("#postID").attr("value")),_ajax_nonce:a("#_wpnonce").val(),comment_content:i,comment_author:d,comment_author_email:b,comment_author_url:e};a("#comment-status-radio").length> 0&&(d=a("#comment-status-radio :checked").attr("value"),f=a.extend(f,{comment_status:d}));if(a("#timestamp").length>0)var d=encodeURIComponent(a("#mm").attr("value")),b=encodeURIComponent(a("#jj").attr("value")),e=encodeURIComponent(a("#aa").attr("value")),i=encodeURIComponent(a("#hh").attr("value")),g=encodeURIComponent(a("#mn").attr("value")),h=encodeURIComponent(a("#ss").attr("value")),f=a.extend(f,{mm:d,jj:b,aa:e,hh:i,mn:g,ss:h});jQuery.post(ajaxurl,f,function(b){if(typeof b.error!= "undefined")c=!0,a("#save").removeAttr("disabled"),a("#status").attr("class","error"),a("#message").html(b.error),a("#close-option").show();else var d=b.content,e=b.comment_author,g=b.comment_author_url,h=b.comment_date,i=b.undo,j=b.spam_count,k=b.moderation_count,l=b.comment_links;if(!c){try{self.parent.jQuery.ajaxeditcomments.update_comment("edit-comment"+f.cid,d),self.parent.jQuery.ajaxeditcomments.update_author("edit-author"+f.cid,e,g),self.parent.jQuery.ajaxeditcomments.update_date_or_time("aecdate"+ f.cid,h),self.parent.jQuery.ajaxeditcomments.undo_message(f.cid,i,!0),self.parent.jQuery(".spam-count").html(j),self.parent.jQuery("#edit-comment-admin-links"+f.cid).html(l),self.parent.jQuery(".pending-count").html(k)}catch(m){}a("#status").attr("class","success");a("#message").html(wpajaxeditcommentedit.AEC_Saved);parent.jQuery.fn.colorbox.close()}},"json")}function n(a){a+="=";for(var d=document.cookie.split(";"),b=0;b<d.length;b++){for(var e=d[b];e.charAt(0)==" ";)e=e.substring(1,e.length);if(e.indexOf(a)== 0)return e.substring(a.length,e.length)}return null}var a=jQuery;a.ajaxcommenteditor={init:function(){jQuery("body.editor").length<=0||(m(),o(),k(),l())},width:0,height:0,commentBoxHeight:0};a("body").attr("style","display: block;");a.ajaxcommenteditor.init()});